Web Server와 WAS의 차이점은 무엇일까?
먼저, 정적 페이지와 동적 페이지에 대해서 알아보겠습니다.

![](https://camo.githubusercontent.com/dac3eae0d749b45864d492ab82d046fbbfdf86891dc69dda6aaffdfabe9b5ea9/68747470733a2f2f676d6c776a64393430352e6769746875622e696f2f696d616765732f7765622f7374617469632d76732d64796e616d69632e706e67)

### Static Pages

> 바뀌지 않는 페이지

웹 서버는 파일 경로 이름을 받고, 경로와 일치하는 파일 컨텐츠를 반환합니다. ( 항상 동일한 페이지 반환 )

**IMAGE, HTML, CSS, JAVSCRIPT 파일과 같이 컴퓨터에 저장된 파일들**

### Dynamic Pages

> 인자에 따라 바뀌는 페이지

인자의 내용에 맞게 동적인 컨텐츠를 반환합니다.
웹 서버에 의해 실행되는 프로그램을 통해 만들어진 결과물입니다. ( Servlet : WAS 위에서 돌아가는 자바 프로그램 ) 개발자는 Servlet에 doGet() 메소드를 구현합니다.

### 웹 서버와 WAS의 차이

![](https://camo.githubusercontent.com/4035eaec5cc3291e03f4468a9e039af0087b5543b5fbaa3750fc6df9fa6c99bf/68747470733a2f2f676d6c776a64393430352e6769746875622e696f2f696d616765732f7765622f7765627365727665722d76732d776173312e706e67)

###  웹 서버

개념에 있어서 하드웨어와 소프트웨어로 구분된다.
**하드웨어** : Web 서버가 설치되어 있는 컴퓨터
**소프트웨어** : 웹 브라우저 클라이언트로부터 HTTP 요청을 받고, 정적인 컨텐츠 ( HTML, CSS 등 ) 를 제공하는 컴퓨터 프로그램

### 웹 서버 기능

> HTTP 프로토콜을 기반으로, 클라이언트의 요청을 서비스하는 기능을 담당합니다.

요청에 맞게 두 가지 기능 중 선택해서 제공해야 합니다.

-  정적 컨텐츠 제공
	-  WAS를 거치지 않고 바로 자원 제공
-  동적 컨텐츠 제공을 위한 요청 전달
	-  클라이언트 요청을 WAS에게 보내고 WAS에서 처리한 결과를 클라이언트에게 전달

**웹 서버의 종류** : Apache, Nginx, IIS 등

### WAS

Web Application Server의 약자

> DB 조회 및 다양한 로직 처리 요구시 **동적인 컨텐츠를 제공** 하기 위해 만들어진 애플리케이션 서버

HTTP를 통해 애플리케이션을 수행해주는 미들웨어이다.
**WAS는 웹 컨테이너 혹은 서블릿 컨테이너** 라고도 불립니다.
( 컨테이너란 JSP, Servlet을 실행시킬 수 있는 소프트웨어. 즉, WAS는 JSP, Servlet 구동 환경을 제공해줍니다. )

### 역할

WAS = 웹 서버 + 웹 컨테이너
웹 서버의 기능들을 구조적으로 분리하여 처리하는 역할

> 보안, 스레드 처리, 분산 트랜잭션 등 분산 환경에서 사용됨 ( 주로 DB 서버와 함께 사용 )

### WAS 주요 기능

1.  프로그램 실행 환경 및 DB 접속 기능 제공
2.  여러 트랜잭션 관리 기능
3.  업무 처리하는 비즈니스 로직 수행

**WAS 종류** : Tomcat, JBoss 등

### 웹 서버가 필요한 이유

웹 서버에서는 정적 컨텐츠만 처리하도록 기능 분배를 해서 서버 부담을 줄인다.

클라이언트가 이미지 파일 ( 정적 컨텐츠 ) 를 보낼 때

웹 문서 ( HTML 문서 ) 가 클라이언트로 보내질 때 이미지 파일과 같은 정적 파일은 함께 보내지지 않습니다. 먼저 HTML 문서를 받고, 이에 필요한 이미지 파일들을 다시 서버로 요청해서 받아오는 것 따라서 웹 서버를 통해서 정적인 파일을 애플리케이션 서버까지 가지 않고 앞 단에 빠르게 보낼 수 있습니다.

### WAS가 필요한 이유

WAS를 통해 요청에 맞는 데이터를 DB에서 가져와 비즈니스 로직에 맞게 그때마다 결과를 만들어 제공하면서 자원을 효율적으로 사용할 수 있습니다.

동적인 컨텐츠를 제공해야 할 때

웹 서버만으로는 사용자가 원하는 요청에 대한 결과값을 모두 미리 만들어놓고 서비스하기에는 자원이 부족합니다. 따라서 WAS를 통하여 요청이 들어올 때 마다 DB와 비즈니스 로직을 통해 결과물을 만들어 제공합니다.

### WAS로 웹 서버 역할까지 다 처리할 수 있는거 아닌가?

WAS는 DB 조회, 다양한 로직을 처리하는데 집중해야 합니다. 따라서 단순 정적 컨텐츠는 웹 서버에 맡기며 기능을 분리시켜 서버 부하를 방지하는 것입니다. 만약 WAS가 정적 컨텐츠 요청까지 처리하면 부하가 커지고 동적 컨텐츠 처리가 지연되며 수행 속도가 느려집니다.

또한, 여러대의 WAS를 연결지어 사용이 가능합니다.
웹 서버를 앞 단에 두고, WAS에 오류가 발생하면 사용자가 이용하지 못하게 막아둔 뒤 재시작하여 해결할 수 있습니다. ( 사용자는 오류를 인지하지 못하고 이용 가능 )

자원 이용의 효율성 및 장애 극복, 배포 및 유지 보수의 편의성 때문에 웹 서버와 WAS를 분리해서 사용하는 것 입니다.

### 가장 효율적인 방법은?

> 웹 서버를 WAS 앞에 두고 필요한 WAS들을 웹 서버에 플러그인 형태로 설정하면 효율적인 분산 처리가 가능합니다.

![](https://camo.githubusercontent.com/0f95749bc0bb4c75cc8f2dd2676bf9fc23ee6bfe62aa440877140ed38253bc44/68747470733a2f2f676d6c776a64393430352e6769746875622e696f2f696d616765732f7765622f7765622d736572766963652d6172636869746563747572652e706e67)

클라이언트의 요청을 먼저 웹 서버가 받은 후 WAS에게 보내 관련된 Servlet을 메모리에 올립니다.
WAS는 web.xml을 참조해 해당 Servlet에 대한 스레드를 생성합니다. ( 스레드 풀 이용 )

> 스레드는 Servlet의 service() 메소드를 호출
> service() 메소드는 요청에 맞게 doGet()이나 doPost() 메소드를 호출합니다.

doGet()이나 doPost() 메소드는 인자에 맞게 생성된 적절한 동적 페이지를 Response 객체에 담아 WAS에 전달 WAS는 Response 객체를 HttpResponse 형태로 바꿔 웹 서버로 전달
생성된 스레드를 종료하고 HttpServletRequest와 HttpServletResponse 객체 제거

### 참고한 사이트

-  https://github.com/gyoogle/tech-interview-for-developer/blob/master/Web/Web%20Server%EC%99%80%20WAS%EC%9D%98%20%EC%B0%A8%EC%9D%B4.md